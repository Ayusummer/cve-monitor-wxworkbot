# 获取用户following列表

import requests

def get_user_following(username, access_token):
    url = f"https://api.github.com/users/{username}/following"
    headers = {
        "Authorization": f"token {access_token}",
        "Accept": "application/vnd.github.v3+json"
    }

    response = requests.get(url, headers=headers)
    if response.status_code == 200:
        following = response.json()
        return following
    else:
        response.raise_for_status()

def get_user_following_main(username, access_token):

    following = get_user_following(username, access_token)
    if following:
        print(f"用户 {username} 正在关注的用户列表：{len(following)}")
        following_list = [repo['login'] for repo in following]
        return following_list
    else:
        print("获取关注列表失败")
        return

if __name__ == "__main__":
    # 输入GitHub用户名和访问令牌
    username = input("请输入GitHub用户名：")
    access_token = input("请输入GitHub访问令牌：")
    get_user_following_main(username, access_token)