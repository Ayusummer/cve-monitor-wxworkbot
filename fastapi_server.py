from fastapi import FastAPI, BackgroundTasks, Depends, HTTPException, status
from fastapi.staticfiles import StaticFiles
from uvicorn import run as uvicorn_run
from starlette.responses import Response
from pathlib import Path


app = FastAPI(
    title="AutoAtomicRedTeam",
    description="Atomic Red Team 自动化测试工具",
    version="0.1.0",
)
app.docs_url = None
app.redoc_url = None
app.openapi_url = None


@app.get("/releases")
def get_releases():
    return Response(
        content=Path("releases.atom").read_text(), media_type="application/atom+xml"
    )


if __name__ == "__main__":
    uvicorn_run(
        "fastapi_server:app",
        host="0.0.0.0",
        port=9224,
        reload=False,
    )
